<%- include('../includes/head.ejs') %>
</head>
<body>
<%- include('../includes/navigation.ejs') %>
<div class="container m-3 p-3 mx-auto">
    <h1 class="mb-4">My Products</h1>
    <% if(prods.length > 0) { %>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3">
        <% for (let product of prods) { %>
        <div class="col">
            <div class="card h-100">
                <img
                    src="<%= product.imgUrl %>"
                    class="card-img-top"
                    alt="product"
                    style="height: 40vh; width: 100%; display: block; object-fit: scale-down;"
                />
                <div class="card-body">
                    <h5 class="card-title mb-2"><%= product.title %></h5>
                    <h6 class="card-subtitle mb-2">$<%= product.price %></h6>
                    <p class="card-text"><%= product.description %></p>
                </div>
                <div class="card-body mx-auto">
                    <a href="/admin/edit-product/<%= product._id %>?edit=true" class="btn btn-warning">Edit product</a>
                    <input type="hidden" id="productId" name="productId" value="<%= product._id %>" />
                    <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
                    <button type="button" class="btn btn-danger" onclick="deleteProduct(this)">Delete product</button>
                </div>
            </div>
        </div>
        <% } %>
    </div>
    <% } else { %>
    <h1>No Products Found!</h1>
    <% } %>
</div>
<script src="/js/admin.js"></script>
<%- include('../includes/end.ejs') %>
